<form #projectForm [formGroup]="projectFormGroup" (ngSubmit)="checkForm()">
    <div class="mb-3">
        <label for="projectName" class="form-label">Project name:</label>
        <input formControlName="name" type="text" class="form-control" id="projectName"
            placeholder="One application to rule them all!">
        <div *ngIf="name?.invalid && (name?.dirty || name?.touched)" class="alert alert-danger mt-1">
            <div *ngIf="name?.errors?.required || name?.errors?.notOnlyWhitespace">
                Name is required.
            </div>

            <div *ngIf="name?.errors?.minlength">
                Name must be at least 4 characters long.
            </div>
        </div>
    </div>

    <div class="mb-3">
        <label for="projectDescription" class="form-label">Project description:</label>
        <textarea formControlName="description" class="form-control" id="projectDescription" rows="4"
            placeholder="This app will control other apps by spreading it's evil influence..."></textarea>
    </div>

    <div class=row>
        <div class="mb-3 col">
            <label for="projectStartDate" class="form-label">Project start date:</label>
            <input formControlName="startDate" type="date" class="form-control" id="projectStartDate">
            <div *ngIf="startDate?.invalid && (startDate?.dirty || startDate?.touched)" class="alert alert-danger mt-1">
                <div *ngIf="startDate?.errors?.required">
                    Start date required.
                </div>
            </div>
        </div>

        <div class="mb-3 col">
            <label for="projectEndDate" class="form-label">Project end date:</label>
            <input formControlName="endDate" type="date" class="form-control" id="projectEndDate">
            <div *ngIf="projectFormGroup?.errors?.['endDateAfterStartDate'] && (endDate?.dirty || endDate?.touched)"
                class="alert alert-danger mt-1">
                End date must be after start date.
            </div>
        </div>
    </div>




    <div class="mb-3">
        <label for="projectImages" class="form-label">Project images:</label>
        <div class="row mt-1">
            <div *ngFor="let tempImage of projectImages" class="col-2">
                <div class="position-relative" id="projectImage">
                    <img src="{{ tempImage['imageUrl'] }}" alt="Project image" class="img-thumbnail thumbnailImage">
                        <!-- (click)="removeImage()" -->
                        <!-- <button type="button" class="btn-close position-absolute top-50 start-50 translate-middle deleteImg" (click)="displayRemoval()"></button> -->
                        <fa-icon [icon]="closeBtn" class="position-absolute top-50 start-50 translate-middle deleteImg d-none" id="deleteButton" (click)="removeImage(tempImage['id'])"></fa-icon>
                </div>
            </div>
        </div>
    </div>

    <!-- (mouseenter)="displayRemoval()" -->


    <div class="mb-3">
        <label for="projectImageUpload" class="form-label">Image upload:</label>
        <input formControlName="images" class="form-control" type="file" id="projectImageUpload"
            (change)="onFileSelected($event)">
        <div *ngIf="images?.invalid && (images?.dirty)" class="alert alert-danger mt-1">
            <div *ngIf="images?.errors?.correctFileType">
                Invalid file type. Please use jpg, jpeg or png.
            </div>
        </div>
        <div *ngIf="errorMessage" class="alert alert-danger mt-1">
            {{ errorMessage }}
        </div>
    </div>

    <div class="d-flex gap-2 mt-4">
        <button type="sumbit" class="btn btn-secondary">Save Changes</button>
        <button type="button" class="btn btn-danger" (click)="formCleanerManual()">Reset</button>
        <button type="button" class="btn btn-primary" routerLink="/projects">Go back</button>
    </div>

    <div id="changes" class="mt-3 d-none">
        <p>Changes saved</p>
    </div>
</form>